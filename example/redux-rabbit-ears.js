var ReduxRabbitEars=function(n){"use strict";var e="@@redux-rabbit-ears/CHANNEL",t=(n=n&&n.hasOwnProperty("default")?n.default:n).browser||n.chrome,r=Object.assign||function(n){for(var e=1;arguments.length>e;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},o="@@redux-rabbit-ears/BROADCAST";return{CHANNEL:e,createExtensionMiddleware:function(n,i){if(!t||!t.runtime)return console.error("Expected {browser, chrome}.runtime to exist"),function(){return function(n){return function(e){return n(e)}}};if("string"!=typeof n)return console.error("Expected extensionId"),function(){return function(n){return function(e){return n(e)}}};var c=void 0,a=!1;return function(s){function u(){c=t.runtime.connect(n,{name:e}),a=!0,console.info("redux-rabbit-ears has connected to chrome-extension://"+n),c.onMessage.addListener(function(n){n.meta&&n.meta.type===o&&s.dispatch(n)}),c.onDisconnect.addListener(function(){a=!1,console.warn("redux-rabbit-ears has disconnected from chrome-extension://"+n),console.info("reconnecting to chrome-extension://"+n),u()})}return u(),i&&i(c,u),function(n){return function(e){return a&&!(e.meta&&e.meta.type===o)&&c.postMessage(r({},e,{meta:{type:o}})),n(e)}}}},createExtensionBackgroundProxy:function(){var n=[];t.runtime.onConnect.addListener(function(t){t.name===e&&(n.push(t),t.onDisconnect.addListener(function(){var e=n.indexOf(t);n.splice(e,1)}),t.onMessage.addListener(function(e){n.forEach(function(n){n!==t&&n.postMessage(e)})}))})}}}(window);
